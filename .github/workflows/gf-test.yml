name: æ‰‹åŠ¨è§¦å‘ Greasy Fork åŒæ­¥æµ‹è¯•

on:
  workflow_dispatch: # å…è®¸åœ¨ Actions é¡µé¢æ‰‹åŠ¨ç‚¹å‡»è¿è¡Œ

jobs:
  test-sync:
    runs-on: ubuntu-latest
    steps:
      - name: æ‰§è¡Œ Webhook æ¨é€
        run: |
          echo "ğŸš€ å¼€å§‹æµ‹è¯•åŒæ­¥åˆ° Greasy Fork..."
          
          # ä½¿ç”¨ -i æ˜¾ç¤ºå“åº”å¤´ï¼Œä½¿ç”¨ -sS éšè—è¿›åº¦æ¡ä½†æ˜¾ç¤ºé”™è¯¯
          curl -i -X POST \
            -H "Content-Type: application/json" \
            -H "User-Agent: GitHub-Hookshot/546a13d" \
            -H "X-GitHub-Event: push" \
            -d '{
              "ref": "refs/heads/main",
              "repository": {
                "full_name": "${{ github.repository }}",
                "html_url": "https://github.com/${{ github.repository }}"
              }
            }' \
            "${{ secrets.GREASYFORK_WEBHOOK_URL }}"
            
          echo -e "\nâœ… æµ‹è¯•æŒ‡ä»¤å‘é€å®Œæ¯•ï¼Œè¯·æ£€æŸ¥ Actions æ—¥å¿—ä¸­çš„ HTTP çŠ¶æ€ç ã€‚"