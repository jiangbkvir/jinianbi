# 版本发布记录

## 🚀 v2.3.0 (待发布)

> 状态：开发中
> 日期：待定
> 主要更新：性能优化、多银行支持增强

### ✨ 新增功能

#### 银行支持增强
- **中国银行移动端**：新增姓名字段自动填充支持
  - 选择器：`#rarewords > div.layout-right > div > div > div > input`

- **中国银行 PC 端**：新增手机号字段自动填充支持
  - 选择器：`#txt_mobile_1956715`

- **农业银行移动端**：完整支持姓名、证件号码、手机号自动填充
  - 姓名：`input.el-input__inner[maxlength="20"]`
  - 证件号码：`[name="identNo"]` + `.information-input:nth-child(3) input.el-input__inner`
  - 手机号码：`.information-input:nth-child(4) input.el-input__inner`

- **通用证件号码选择器**：新增 `[name="IDCardNo"]` 支持

#### 测试功能
- 新增测试页面支持：`https://jiangbkvir.github.io/jinianbi/`
- 用户可在测试页面上安全测试脚本功能，无需等待真实预约开始

### ⚡ 性能优化

- **更快的脚本加载**：改用 `DOMContentLoaded` 替代 `window.load`
  - 不再等待图片、CSS 等资源加载完成
  - 脚本界面更快出现，提升用户体验

- **优化版本检查逻辑**：
  - 使用 `origin/main~1` 替代 `HEAD^`，避免 merge 导致的误判
  - 添加更严格的版本检查条件
  - 防止版本号相同时误触发 Greasy Fork 同步

### 🐛 Bug 修复

- **修复组件不显示问题**：
  - 修复首次加载时组件完全不显示的严重 bug
  - 修复 `document.body` 不存在时的错误
  - 添加自动等待机制，确保 body 加载后再添加组件

- **修复折叠状态显示异常**：
  - 修复折叠状态下展开按钮不显示的问题
  - 恢复状态时正确显示展开按钮

- **修复元素添加逻辑**：
  - 修复有保存位置时组件不添加到 DOM 的问题
  - 确保所有情况下组件都能正确显示

### 📝 文档更新

- 删除冗余文档，精简项目结构
- 删除 README 中的更新日志部分，保持简洁

### 🔧 技术改进

- 添加容错处理：body 不存在时自动延迟加载
- 优化 GitHub Actions 工作流配置
- 改进日志输出，便于调试

---

## 📋 待完成功能

### 计划中
- [ ] 邮政储蓄银行移动端证件号码填充支持
- [ ] 其他银行兼容性测试
- [ ] 性能进一步优化

---

## 📜 历史版本

### v2.2.0 (2026-01-14)

- Release v2.2.0 - 测试精确同步
- 初始化显示问题修复
- 脚本重构和优化

### v2.1.x

- 体验优化
- Tab 键导航优化
- 代码重构

### v2.0.0

- 重大更新
- 模块化设计
- 支持更多银行

### v1.x

- 初始版本
- 基础功能实现

---

**发布流程**：
1. 完成所有待开发功能
2. 本地测试验证
3. 更新版本号到 2.3.0
4. 合并到 main 分支
5. 自动触发 Greasy Fork 同步和 GitHub Release 创建
